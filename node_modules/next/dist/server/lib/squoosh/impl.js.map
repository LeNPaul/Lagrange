{"version":3,"sources":["../../../../server/lib/squoosh/impl.ts"],"names":["semver","supportedFormats","codecs","preprocessors","ImageData","FIXED_VERSION","DELAY_MS","_promise","delayOnce","ms","Promise","resolve","setTimeout","maybeDelay","isAppleM1","process","arch","platform","lt","version","decodeBuffer","_buffer","buffer","Buffer","from","firstChunk","slice","firstChunkString","Array","map","v","String","fromCodePoint","join","key","Object","entries","find","detectors","some","detector","exec","Error","encoder","mod","dec","rgba","decode","Uint8Array","rotate","image","numRotations","m","instantiate","data","width","height","resize","p","defaultOptions","encodeJpeg","quality","e","enc","r","encode","defaultEncoderOptions","encodeWebp","encodeAvif","val","autoOptimize","min","cqLevel","Math","round","encodePng"],"mappings":"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"}