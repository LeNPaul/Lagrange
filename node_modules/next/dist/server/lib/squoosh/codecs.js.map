{"version":3,"sources":["../../../../server/lib/squoosh/codecs.ts"],"names":["fsp","promises","path","instantiateEmscriptenWasm","pathify","MozJPEGEncodeModule","MozJPEGModule","mozEnc","mozEncWasm","resolve","__dirname","mozDec","mozDecWasm","WebPEncodeModule","WebPModule","webpEnc","webpEncWasm","webpDec","webpDecWasm","AVIFEncodeModule","AVIFModule","avifEnc","avifEncWasm","avifDec","avifDecWasm","pngEncDec","pngEncDecWasm","pngEncDecInit","default","readFile","oxipng","oxipngWasm","oxipngInit","resize","resizeWasm","resizeInit","rotateWasm","ImageData","global","resizeNameToIndex","name","Error","resizeWithAspect","input_width","input_height","target_width","target_height","width","height","Math","round","preprocessors","description","instantiate","buffer","method","premultiply","linearRGB","imageData","cleanup","defaultOptions","fitMethod","rotate","numRotations","degrees","sameDimensions","size","instance","WebAssembly","memory","exports","additionalPagesNeeded","ceil","byteLength","grow","view","Uint8ClampedArray","set","slice","codecs","mozjpeg","extension","detectors","dec","enc","defaultEncoderOptions","quality","baseline","arithmetic","progressive","optimize_coding","smoothing","color_space","quant_table","trellis_multipass","trellis_opt_zero","trellis_opt_table","trellis_loops","auto_subsample","chroma_subsample","separate_chroma_quality","chroma_quality","autoOptimize","option","min","max","webp","target_size","target_PSNR","sns_strength","filter_strength","filter_sharpness","filter_type","partitions","segments","pass","show_compressed","preprocessing","autofilter","partition_limit","alpha_compression","alpha_filtering","alpha_quality","lossless","exact","image_hint","emulate_jpeg_size","thread_level","low_memory","near_lossless","use_delta_palette","use_sharp_yuv","avif","cqLevel","cqAlphaLevel","denoiseLevel","tileColsLog2","tileRowsLog2","speed","subsample","chromaDeltaQ","sharpness","tune","decode","encode","opts","simplePng","Uint8Array","optimise","level"],"mappings":"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"}