{"version":3,"sources":["../../../../../shared/lib/router/utils/prepare-destination.ts"],"names":["IncomingMessage","Key","NextParsedUrlQuery","Params","RouteHas","compile","pathToRegexp","escapeStringRegexp","parseUrl","matchHas","req","has","query","params","allMatch","every","hasItem","value","key","type","toLowerCase","headers","cookies","host","hostname","split","getSafeParamName","matcher","RegExp","matches","Array","isArray","slice","match","groups","Object","keys","forEach","groupKey","compileNonPath","includes","replace","validate","substr","prepareDestination","args","assign","__nextLocale","__nextDefaultLocale","escapedDestination","destination","param","escapeSegment","parsedDestination","destQuery","destPath","unescapeSegments","pathname","hash","destHostname","destPathParamKeys","destHostnameParamKeys","destParams","push","name","destPathCompiler","destHostnameCompiler","strOrArray","entries","map","paramKeys","filter","appendParamsToQuery","some","newUrl","search","err","message","Error","paramName","newParamName","i","length","charCode","charCodeAt","str","segmentName"],"mappings":"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"}