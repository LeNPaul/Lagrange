{"version":3,"sources":["../../../trace/report/to-json.ts"],"names":["randomBytes","traceGlobals","fs","path","PHASE_DEVELOPMENT_SERVER","localEndpoint","serviceName","ipv4","port","batcher","reportEvents","events","queue","Set","flushAll","Promise","all","length","report","event","push","evts","slice","add","then","delete","writeStream","traceId","batch","writeStreamOptions","flags","encoding","RotatingWriteStream","file","size","sizeLimit","rotatePromise","drainPromise","constructor","createWriteStream","rotate","end","unlinkSync","err","code","undefined","write","data","resolve","_reject","once","reportToLocalHost","name","duration","timestamp","id","parentId","attrs","distDir","get","phase","process","env","TRACE_ID","toString","promises","mkdir","recursive","join","Infinity","eventsJson","JSON","stringify","console","log","tags"],"mappings":"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"}